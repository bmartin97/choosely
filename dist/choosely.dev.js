module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Choosely; });\nfunction createElementFromHTML(htmlString) {\n  var div = document.createElement('div');\n  div.innerHTML = htmlString.trim(); // Change this to div.childNodes to support multiple top-level nodes\n\n  return div.firstChild;\n}\n\nfunction createAttributesFromObject(attrObject) {\n  return Object.values(attrObject).map(value => `${value.nodeName}=\"${value.nodeValue}\"`).join(' ');\n}\n\nfunction createAttributesFromAttributeList(attrObject, attrArray) {\n  return Object.values(attrObject).map(value => {\n    if (attrArray.includes(value.nodeName)) {\n      return `${value.nodeName}=\"${value.nodeValue}\"`;\n    }\n  }).join(' ');\n}\n\nclass Choosely {\n  constructor(selector = undefined, {\n    target = undefined,\n    searchable = false,\n    inheritAttributes = false,\n    enableArrowNavigation = true,\n    on = {}\n  }) {\n    const functionProps = ['Init', 'Open', 'Close', 'Select'];\n    functionProps.forEach(prop => this['on' + prop] = on[prop] || function () {}); // this.onInit = on.Init || function () {};\n    // this.onOpen = on.Open || function () {};\n    // this.onClose = on.Close || function () {};\n    // this.onSelect = on.Select || function () {};\n\n    this.state = {\n      _selected: null,\n\n      set Selected(new_selected) {\n        this._selected = new_selected;\n      },\n\n      get Selected() {\n        return this._selected;\n      },\n\n      _options: [],\n\n      set Options(new_options) {\n        this._options = new_options;\n      },\n\n      get Options() {\n        return this._options;\n      },\n\n      _filteredOptions: [],\n\n      set FilteredOptions(value) {\n        this._filteredOptions = value;\n        console.log('work', this);\n        this.RefreshOptions();\n      },\n\n      get FilteredOptions() {\n        return this._filteredOptions;\n      },\n\n      _isOpened: false,\n\n      set IsOpened(value) {\n        this._isOpened = value;\n      },\n\n      get IsOpened() {\n        return this._isOpened;\n      }\n\n    };\n    Object.defineProperty(this.state, 'FilteredOptions', {\n      set: function (value) {\n        this.state._filteredOptions = value;\n        this.RefreshOptions();\n      }.bind(this)\n    });\n\n    try {\n      const _sourceElement = document.querySelector(selector);\n\n      if (_sourceElement) {\n        this.sourceElement = _sourceElement;\n      } else {\n        throw new Error(`Source element doesn't exist. Selector: ${selector}`);\n      } // Select target HTML Element\n\n\n      if (target) {\n        const _targetElement = document.querySelector(target);\n\n        if (_targetElement) {\n          this.targetElement = _targetElement;\n        } else {\n          throw new Error(`Target element doesn't exist. Selector: ${target}`);\n        }\n      } else {\n        const _targetElement = this.sourceElement.parentElement;\n\n        if (_targetElement) {\n          this.targetElement = _targetElement;\n        } else {\n          throw new Error(`Source element doesn't have parent elements. Please define target element.`);\n        }\n      } // Render choosely\n\n\n      const options = this.sourceElement.querySelectorAll('option');\n\n      const renderOptions = () => {\n        if (inheritAttributes) {\n          if (typeof inheritAttributes === 'object' && Array.isArray(inheritAttributes)) {\n            // Array\n            return Array.from(options).map(_option => {\n              const text = _option.innerText;\n\n              const _clone = _option.cloneNode();\n\n              _clone.classList.add('choosely-option');\n\n              const attributes = _clone.attributes;\n              return `<div ${createAttributesFromAttributeList(attributes, inheritAttributes)} ${!inheritAttributes.includes('class') ? 'class=\"choosely-option\"' : ''}>${text}</div>`;\n            });\n          } else if (typeof inheritAttributes === 'boolean') {\n            // True\n            return Array.from(options).map(_option => {\n              const text = _option.innerText;\n\n              const _clone = _option.cloneNode();\n\n              _clone.classList.add('choosely-option');\n\n              const attributes = _clone.attributes;\n              return `<div ${createAttributesFromObject(attributes)} >${text}</div>`;\n            });\n          } else {\n            // Invalid type\n            throw new Error(`Invalid type for inheritAttributes property.`);\n          }\n        } else {\n          // False\n          return Array.from(options).map(_option => {\n            const text = _option.innerText;\n            return `<div class=\"choosely-option\">${text}</div>`;\n          });\n        }\n      };\n\n      const html = `\n                <div class=\"choosely-select\">\n                    <div class=\"choosely-selected\">\n                        ${options[0].innerText}\n                    </div>\n                    <div class=\"choosely-option-container\">\n                        ${searchable ? `\n                            <div class=\"choosely-search\">\n                                <input type=\"search\" autocomplete=\"off\">\n                            </div>` : ``}\n                        <div class=\"choosely-options\">\n                            ${renderOptions().join('')}\n                        </div>\n                    </div>\n                </div >\n                `;\n\n      const _element = createElementFromHTML(html);\n\n      this.targetElement.appendChild(_element);\n      this.chooselyElement = _element;\n      this.state.Selected = _element.querySelector('.choosely-selected');\n      this.state.Options = _element.querySelectorAll('.choosely-option');\n      this.state.Options[0].classList.add('choosely-selected-option');\n      this.chooselyOptionsElement = _element.querySelector('.choosely-option-container .choosely-options');\n      this.state.Selected.addEventListener('click', () => {\n        if (this.IsOpened) {\n          this.Close();\n        } else {\n          this.Open();\n        }\n      });\n      this.state.Options.forEach(_option => {\n        _option.addEventListener('click', () => {\n          this.Select(_option);\n          this.Close();\n        });\n      });\n      window.addEventListener('click', evt => {\n        if (this.IsOpened && !this.chooselyElement.contains(evt.target)) {\n          this.Close();\n        }\n      });\n      this.state._filteredOptions = this.state.Options;\n\n      if (searchable) {\n        const searchElement = this.chooselyElement.querySelector('.choosely-search > input');\n        searchElement.addEventListener('input', event => {\n          const keyword = event.target.value;\n          this.state.FilteredOptions = Array.from(this.state.Options).filter(_option => _option.innerText.toLowerCase().includes(keyword.toLowerCase()));\n        });\n      }\n\n      if (enableArrowNavigation) {\n        document.addEventListener('keydown', event => {\n          if (this.IsOpened) {\n            if (event.which === 40) {\n              // Down arrow\n              const indexOfSelectedOption = Array.from(this.state.FilteredOptions).findIndex(_option => _option.classList.contains('choosely-selected-option'));\n\n              if (0 <= indexOfSelectedOption && indexOfSelectedOption < this.state.FilteredOptions.length - 1) {\n                this.state.FilteredOptions[indexOfSelectedOption].classList.remove('choosely-selected-option');\n                this.state.FilteredOptions[indexOfSelectedOption + 1].classList.add('choosely-selected-option');\n                this.Select(this.state.FilteredOptions[indexOfSelectedOption + 1]);\n              }\n            } else if (event.which === 38) {\n              // Up arrow\n              const indexOfSelectedOption = Array.from(this.state.FilteredOptions).findIndex(_option => _option.classList.contains('choosely-selected-option'));\n\n              if (1 <= indexOfSelectedOption && indexOfSelectedOption < this.state.FilteredOptions.length) {\n                this.state.FilteredOptions[indexOfSelectedOption].classList.remove('choosely-selected-option');\n                this.state.FilteredOptions[indexOfSelectedOption - 1].classList.add('choosely-selected-option');\n                this.Select(this.state.FilteredOptions[indexOfSelectedOption - 1]);\n              }\n            } else if (event.keyCode === 13) {\n              this.Close();\n            }\n          }\n        });\n      }\n\n      return this;\n    } catch (err) {\n      console.error(err, 'Choosely.js');\n    } finally {\n      this.onInit();\n    }\n  }\n  /**\r\n   * @param {HTMLElement} option\r\n   */\n\n\n  Select(option) {\n    this.state.Options.forEach(_option => _option.classList.remove('choosely-selected-option'));\n    option.classList.add('choosely-selected-option');\n    this.state.Selected.innerText = option.innerText;\n    this.onSelect();\n  }\n\n  Open() {\n    this.chooselyElement.classList.add('c-opened');\n    this.IsOpened = true;\n    this.onOpen();\n  }\n\n  Close() {\n    this.chooselyElement.classList.remove('c-opened');\n    this.IsOpened = false;\n    this.onClose();\n  }\n\n  RefreshOptions() {\n    const temp = document.createElement('div');\n    this.state.FilteredOptions.forEach(_element => temp.appendChild(_element));\n    this.chooselyOptionsElement.innerHTML = '';\n    this.state.FilteredOptions.forEach(_element => this.chooselyOptionsElement.appendChild(_element));\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJuYW1lcyI6WyJjcmVhdGVFbGVtZW50RnJvbUhUTUwiLCJodG1sU3RyaW5nIiwiZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwidHJpbSIsImZpcnN0Q2hpbGQiLCJjcmVhdGVBdHRyaWJ1dGVzRnJvbU9iamVjdCIsImF0dHJPYmplY3QiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJ2YWx1ZSIsIm5vZGVOYW1lIiwibm9kZVZhbHVlIiwiam9pbiIsImNyZWF0ZUF0dHJpYnV0ZXNGcm9tQXR0cmlidXRlTGlzdCIsImF0dHJBcnJheSIsImluY2x1ZGVzIiwiQ2hvb3NlbHkiLCJjb25zdHJ1Y3RvciIsInNlbGVjdG9yIiwidW5kZWZpbmVkIiwidGFyZ2V0Iiwic2VhcmNoYWJsZSIsImluaGVyaXRBdHRyaWJ1dGVzIiwiZW5hYmxlQXJyb3dOYXZpZ2F0aW9uIiwib24iLCJmdW5jdGlvblByb3BzIiwiZm9yRWFjaCIsInByb3AiLCJzdGF0ZSIsIl9zZWxlY3RlZCIsIlNlbGVjdGVkIiwibmV3X3NlbGVjdGVkIiwiX29wdGlvbnMiLCJPcHRpb25zIiwibmV3X29wdGlvbnMiLCJfZmlsdGVyZWRPcHRpb25zIiwiRmlsdGVyZWRPcHRpb25zIiwiY29uc29sZSIsImxvZyIsIlJlZnJlc2hPcHRpb25zIiwiX2lzT3BlbmVkIiwiSXNPcGVuZWQiLCJkZWZpbmVQcm9wZXJ0eSIsInNldCIsImJpbmQiLCJfc291cmNlRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJzb3VyY2VFbGVtZW50IiwiRXJyb3IiLCJfdGFyZ2V0RWxlbWVudCIsInRhcmdldEVsZW1lbnQiLCJwYXJlbnRFbGVtZW50Iiwib3B0aW9ucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJyZW5kZXJPcHRpb25zIiwiQXJyYXkiLCJpc0FycmF5IiwiZnJvbSIsIl9vcHRpb24iLCJ0ZXh0IiwiaW5uZXJUZXh0IiwiX2Nsb25lIiwiY2xvbmVOb2RlIiwiY2xhc3NMaXN0IiwiYWRkIiwiYXR0cmlidXRlcyIsImh0bWwiLCJfZWxlbWVudCIsImFwcGVuZENoaWxkIiwiY2hvb3NlbHlFbGVtZW50IiwiY2hvb3NlbHlPcHRpb25zRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJDbG9zZSIsIk9wZW4iLCJTZWxlY3QiLCJ3aW5kb3ciLCJldnQiLCJjb250YWlucyIsInNlYXJjaEVsZW1lbnQiLCJldmVudCIsImtleXdvcmQiLCJmaWx0ZXIiLCJ0b0xvd2VyQ2FzZSIsIndoaWNoIiwiaW5kZXhPZlNlbGVjdGVkT3B0aW9uIiwiZmluZEluZGV4IiwibGVuZ3RoIiwicmVtb3ZlIiwia2V5Q29kZSIsImVyciIsImVycm9yIiwib25Jbml0Iiwib3B0aW9uIiwib25TZWxlY3QiLCJvbk9wZW4iLCJvbkNsb3NlIiwidGVtcCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBLFNBQVNBLHFCQUFULENBQStCQyxVQUEvQixFQUEyQztBQUN2QyxNQUFJQyxHQUFHLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixLQUF2QixDQUFWO0FBQ0FGLEtBQUcsQ0FBQ0csU0FBSixHQUFnQkosVUFBVSxDQUFDSyxJQUFYLEVBQWhCLENBRnVDLENBSXZDOztBQUNBLFNBQU9KLEdBQUcsQ0FBQ0ssVUFBWDtBQUNIOztBQUVELFNBQVNDLDBCQUFULENBQW9DQyxVQUFwQyxFQUFnRDtBQUM1QyxTQUFPQyxNQUFNLENBQUNDLE1BQVAsQ0FBY0YsVUFBZCxFQUNGRyxHQURFLENBQ0dDLEtBQUQsSUFBWSxHQUFFQSxLQUFLLENBQUNDLFFBQVMsS0FBSUQsS0FBSyxDQUFDRSxTQUFVLEdBRG5ELEVBRUZDLElBRkUsQ0FFRyxHQUZILENBQVA7QUFHSDs7QUFFRCxTQUFTQyxpQ0FBVCxDQUEyQ1IsVUFBM0MsRUFBdURTLFNBQXZELEVBQWtFO0FBQzlELFNBQU9SLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjRixVQUFkLEVBQ0ZHLEdBREUsQ0FDR0MsS0FBRCxJQUFXO0FB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akQ7QUFDSDs7QUF6UXlCIiwiZmlsZSI6Ii4vc3JjL2luZGV4LmpzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gY3JlYXRlRWxlbWVudEZyb21IVE1MKGh0bWxTdHJpbmcpIHtcclxuICAgIHZhciBkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGRpdi5pbm5lckhUTUwgPSBodG1sU3RyaW5nLnRyaW0oKTtcclxuXHJcbiAgICAvLyBDaGFuZ2UgdGhpcyB0byBkaXYuY2hpbGROb2RlcyB0byBzdXBwb3J0IG11bHRpcGxlIHRvcC1sZXZlbCBub2Rlc1xyXG4gICAgcmV0dXJuIGRpdi5maXJzdENoaWxkO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVBdHRyaWJ1dGVzRnJvbU9iamVjdChhdHRyT2JqZWN0KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhhdHRyT2JqZWN0KVxyXG4gICAgICAgIC5tYXAoKHZhbHVlKSA9PiBgJHt2YWx1ZS5ub2RlTmFtZX09XCIke3ZhbHVlLm5vZGVWYWx1ZX1cImApXHJcbiAgICAgICAgLmpvaW4oJyAnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlc0Zyb21BdHRyaWJ1dGVMaXN0KGF0dHJPYmplY3QsIGF0dHJBcnJheSkge1xyXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoYXR0ck9iamVjdClcclxuICAgICAgICAubWFwKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoYXR0ckFycmF5LmluY2x1ZGVzKHZhbHVlLm5vZGVOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3ZhbHVlLm5vZGVOYW1lfT1cIiR7dmFsdWUubm9kZVZhbHVlfVwiYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmpvaW4oJyAnKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hvb3NlbHkge1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgc2VsZWN0b3IgPSB1bmRlZmluZWQsXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0YXJnZXQgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgIHNlYXJjaGFibGUgPSBmYWxzZSxcclxuICAgICAgICAgICAgaW5oZXJpdEF0dHJpYnV0ZXMgPSBmYWxzZSxcclxuICAgICAgICAgICAgZW5hYmxlQXJyb3dOYXZpZ2F0aW9uID0gdHJ1ZSxcclxuICAgICAgICAgICAgb24gPSB7fVxyXG4gICAgICAgIH1cclxuICAgICkge1xyXG4gICAgICAgIGNvbnN0IGZ1bmN0aW9uUHJvcHMgPSBbJ0luaXQnLCAnT3BlbicsICdDbG9zZScsICdTZWxlY3QnXTtcclxuICAgICAgICBmdW5jdGlvblByb3BzLmZvckVhY2goKHByb3ApID0+ICh0aGlzWydvbicgKyBwcm9wXSA9IG9uW3Byb3BdIHx8IGZ1bmN0aW9uICgpIHt9KSk7XHJcbiAgICAgICAgLy8gdGhpcy5vbkluaXQgPSBvbi5Jbml0IHx8IGZ1bmN0aW9uICgpIHt9O1xyXG4gICAgICAgIC8vIHRoaXMub25PcGVuID0gb24uT3BlbiB8fCBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgICAvLyB0aGlzLm9uQ2xvc2UgPSBvbi5DbG9zZSB8fCBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgICAvLyB0aGlzLm9uU2VsZWN0ID0gb24uU2VsZWN0IHx8IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBfc2VsZWN0ZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHNldCBTZWxlY3RlZChuZXdfc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkID0gbmV3X3NlbGVjdGVkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQgU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vcHRpb25zOiBbXSxcclxuICAgICAgICAgICAgc2V0IE9wdGlvbnMobmV3X29wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSBuZXdfb3B0aW9ucztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0IE9wdGlvbnMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2ZpbHRlcmVkT3B0aW9uczogW10sXHJcbiAgICAgICAgICAgIHNldCBGaWx0ZXJlZE9wdGlvbnModmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbHRlcmVkT3B0aW9ucyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3dvcmsnLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuUmVmcmVzaE9wdGlvbnMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0IEZpbHRlcmVkT3B0aW9ucygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9maWx0ZXJlZE9wdGlvbnM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pc09wZW5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNldCBJc09wZW5lZCh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNPcGVuZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0IElzT3BlbmVkKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzT3BlbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuc3RhdGUsICdGaWx0ZXJlZE9wdGlvbnMnLCB7XHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLl9maWx0ZXJlZE9wdGlvbnMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuUmVmcmVzaE9wdGlvbnMoKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9zb3VyY2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIGlmIChfc291cmNlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VFbGVtZW50ID0gX3NvdXJjZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNvdXJjZSBlbGVtZW50IGRvZXNuJ3QgZXhpc3QuIFNlbGVjdG9yOiAke3NlbGVjdG9yfWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTZWxlY3QgdGFyZ2V0IEhUTUwgRWxlbWVudFxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGlmIChfdGFyZ2V0RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudCA9IF90YXJnZXRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhcmdldCBlbGVtZW50IGRvZXNuJ3QgZXhpc3QuIFNlbGVjdG9yOiAke3RhcmdldH1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF90YXJnZXRFbGVtZW50ID0gdGhpcy5zb3VyY2VFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RhcmdldEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSBfdGFyZ2V0RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgU291cmNlIGVsZW1lbnQgZG9lc24ndCBoYXZlIHBhcmVudCBlbGVtZW50cy4gUGxlYXNlIGRlZmluZSB0YXJnZXQgZWxlbWVudC5gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gUmVuZGVyIGNob29zZWx5XHJcbiAgICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLnNvdXJjZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnb3B0aW9uJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZW5kZXJPcHRpb25zID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGluaGVyaXRBdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBpbmhlcml0QXR0cmlidXRlcyA9PT0gJ29iamVjdCcgJiYgQXJyYXkuaXNBcnJheShpbmhlcml0QXR0cmlidXRlcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXJyYXlcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ob3B0aW9ucykubWFwKChfb3B0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gX29wdGlvbi5pbm5lclRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgX2Nsb25lID0gX29wdGlvbi5jbG9uZU5vZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9jbG9uZS5jbGFzc0xpc3QuYWRkKCdjaG9vc2VseS1vcHRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBfY2xvbmUuYXR0cmlidXRlcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxkaXYgJHtjcmVhdGVBdHRyaWJ1dGVzRnJvbUF0dHJpYnV0ZUxpc3QoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmhlcml0QXR0cmlidXRlc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKX0gJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhaW5oZXJpdEF0dHJpYnV0ZXMuaW5jbHVkZXMoJ2NsYXNzJykgPyAnY2xhc3M9XCJjaG9vc2VseS1vcHRpb25cIicgOiAnJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfT4ke3RleHR9PC9kaXY+YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgaW5oZXJpdEF0dHJpYnV0ZXMgPT09ICdib29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUcnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKG9wdGlvbnMpLm1hcCgoX29wdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4dCA9IF9vcHRpb24uaW5uZXJUZXh0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9jbG9uZSA9IF9vcHRpb24uY2xvbmVOb2RlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfY2xvbmUuY2xhc3NMaXN0LmFkZCgnY2hvb3NlbHktb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gX2Nsb25lLmF0dHJpYnV0ZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGA8ZGl2ICR7Y3JlYXRlQXR0cmlidXRlc0Zyb21PYmplY3QoYXR0cmlidXRlcyl9ID4ke3RleHR9PC9kaXY+YDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW52YWxpZCB0eXBlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCB0eXBlIGZvciBpbmhlcml0QXR0cmlidXRlcyBwcm9wZXJ0eS5gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFycmF5LmZyb20ob3B0aW9ucykubWFwKChfb3B0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBfb3B0aW9uLmlubmVyVGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPGRpdiBjbGFzcz1cImNob29zZWx5LW9wdGlvblwiPiR7dGV4dH08L2Rpdj5gO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgY29uc3QgaHRtbCA9IGBcclxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaG9vc2VseS1zZWxlY3RcIj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hvb3NlbHktc2VsZWN0ZWRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtvcHRpb25zWzBdLmlubmVyVGV4dH1cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hvb3NlbHktb3B0aW9uLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoYWJsZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNob29zZWx5LXNlYXJjaFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPVwic2VhcmNoXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBgYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaG9vc2VseS1vcHRpb25zXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3JlbmRlck9wdGlvbnMoKS5qb2luKCcnKX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICA8L2RpdiA+XHJcbiAgICAgICAgICAgICAgICBgO1xyXG4gICAgICAgICAgICBjb25zdCBfZWxlbWVudCA9IGNyZWF0ZUVsZW1lbnRGcm9tSFRNTChodG1sKTtcclxuICAgICAgICAgICAgdGhpcy50YXJnZXRFbGVtZW50LmFwcGVuZENoaWxkKF9lbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hvb3NlbHlFbGVtZW50ID0gX2VsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuU2VsZWN0ZWQgPSBfZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2hvb3NlbHktc2VsZWN0ZWQnKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5PcHRpb25zID0gX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNob29zZWx5LW9wdGlvbicpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLk9wdGlvbnNbMF0uY2xhc3NMaXN0LmFkZCgnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hvb3NlbHlPcHRpb25zRWxlbWVudCA9IF9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgICAgICAgICAgICAnLmNob29zZWx5LW9wdGlvbi1jb250YWluZXIgLmNob29zZWx5LW9wdGlvbnMnXHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLlNlbGVjdGVkLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuSXNPcGVuZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5PcHRpb25zLmZvckVhY2goKF9vcHRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIF9vcHRpb24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5TZWxlY3QoX29wdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5Jc09wZW5lZCAmJiAhdGhpcy5jaG9vc2VseUVsZW1lbnQuY29udGFpbnMoZXZ0LnRhcmdldCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLl9maWx0ZXJlZE9wdGlvbnMgPSB0aGlzLnN0YXRlLk9wdGlvbnM7XHJcbiAgICAgICAgICAgIGlmIChzZWFyY2hhYmxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2hFbGVtZW50ID0gdGhpcy5jaG9vc2VseUVsZW1lbnQucXVlcnlTZWxlY3RvcignLmNob29zZWx5LXNlYXJjaCA+IGlucHV0Jyk7XHJcbiAgICAgICAgICAgICAgICBzZWFyY2hFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qga2V5d29yZCA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9ucyA9IEFycmF5LmZyb20odGhpcy5zdGF0ZS5PcHRpb25zKS5maWx0ZXIoKF9vcHRpb24pID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9vcHRpb24uaW5uZXJUZXh0LnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoa2V5d29yZC50b0xvd2VyQ2FzZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZW5hYmxlQXJyb3dOYXZpZ2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuSXNPcGVuZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LndoaWNoID09PSA0MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRG93biBhcnJvd1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhPZlNlbGVjdGVkT3B0aW9uID0gQXJyYXkuZnJvbShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKS5maW5kSW5kZXgoKF9vcHRpb24pID0+IF9vcHRpb24uY2xhc3NMaXN0LmNvbnRhaW5zKCdjaG9vc2VseS1zZWxlY3RlZC1vcHRpb24nKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgMCA8PSBpbmRleE9mU2VsZWN0ZWRPcHRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmRleE9mU2VsZWN0ZWRPcHRpb24gPCB0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9ucy5sZW5ndGggLSAxXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9uc1tpbmRleE9mU2VsZWN0ZWRPcHRpb25dLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjaG9vc2VseS1zZWxlY3RlZC1vcHRpb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9uc1tpbmRleE9mU2VsZWN0ZWRPcHRpb24gKyAxXS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5TZWxlY3QodGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnNbaW5kZXhPZlNlbGVjdGVkT3B0aW9uICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LndoaWNoID09PSAzOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXAgYXJyb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4T2ZTZWxlY3RlZE9wdGlvbiA9IEFycmF5LmZyb20oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICkuZmluZEluZGV4KChfb3B0aW9uKSA9PiBfb3B0aW9uLmNsYXNzTGlzdC5jb250YWlucygnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJykpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEgPD0gaW5kZXhPZlNlbGVjdGVkT3B0aW9uICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXhPZlNlbGVjdGVkT3B0aW9uIDwgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnMubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9uc1tpbmRleE9mU2VsZWN0ZWRPcHRpb25dLmNsYXNzTGlzdC5yZW1vdmUoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjaG9vc2VseS1zZWxlY3RlZC1vcHRpb24nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9uc1tpbmRleE9mU2VsZWN0ZWRPcHRpb24gLSAxXS5jbGFzc0xpc3QuYWRkKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5TZWxlY3QodGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnNbaW5kZXhPZlNlbGVjdGVkT3B0aW9uIC0gMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgPT09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkNsb3NlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLCAnQ2hvb3NlbHkuanMnKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLm9uSW5pdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtIVE1MRWxlbWVudH0gb3B0aW9uXHJcbiAgICAgKi9cclxuICAgIFNlbGVjdChvcHRpb24pIHtcclxuICAgICAgICB0aGlzLnN0YXRlLk9wdGlvbnMuZm9yRWFjaCgoX29wdGlvbikgPT4gX29wdGlvbi5jbGFzc0xpc3QucmVtb3ZlKCdjaG9vc2VseS1zZWxlY3RlZC1vcHRpb24nKSk7XHJcbiAgICAgICAgb3B0aW9uLmNsYXNzTGlzdC5hZGQoJ2Nob29zZWx5LXNlbGVjdGVkLW9wdGlvbicpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuU2VsZWN0ZWQuaW5uZXJUZXh0ID0gb3B0aW9uLmlubmVyVGV4dDtcclxuICAgICAgICB0aGlzLm9uU2VsZWN0KCk7XHJcbiAgICB9XHJcbiAgICBPcGVuKCkge1xyXG4gICAgICAgIHRoaXMuY2hvb3NlbHlFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2Mtb3BlbmVkJyk7XHJcbiAgICAgICAgdGhpcy5Jc09wZW5lZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5vbk9wZW4oKTtcclxuICAgIH1cclxuICAgIENsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuY2hvb3NlbHlFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2Mtb3BlbmVkJyk7XHJcbiAgICAgICAgdGhpcy5Jc09wZW5lZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25DbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgUmVmcmVzaE9wdGlvbnMoKSB7XHJcbiAgICAgICAgY29uc3QgdGVtcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuRmlsdGVyZWRPcHRpb25zLmZvckVhY2goKF9lbGVtZW50KSA9PiB0ZW1wLmFwcGVuZENoaWxkKF9lbGVtZW50KSk7XHJcbiAgICAgICAgdGhpcy5jaG9vc2VseU9wdGlvbnNFbGVtZW50LmlubmVySFRNTCA9ICcnO1xyXG4gICAgICAgIHRoaXMuc3RhdGUuRmlsdGVyZWRPcHRpb25zLmZvckVhY2goKF9lbGVtZW50KSA9PiB0aGlzLmNob29zZWx5T3B0aW9uc0VsZW1lbnQuYXBwZW5kQ2hpbGQoX2VsZW1lbnQpKTtcclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ })

/******/ });