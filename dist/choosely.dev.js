module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Choosely; });\nfunction createElementFromHTML(htmlString) {\n  var div = document.createElement('div');\n  div.innerHTML = htmlString.trim(); // Change this to div.childNodes to support multiple top-level nodes\n\n  return div.firstChild;\n}\n\nfunction createAttributesFromObject(attrObject) {\n  return Object.values(attrObject).map(value => `${value.nodeName}=\"${value.nodeValue}\"`).join(' ');\n}\n\nfunction createAttributesFromAttributeList(attrObject, attrArray) {\n  return Object.values(attrObject).map(value => {\n    if (attrArray.includes(value.nodeName)) {\n      return `${value.nodeName}=\"${value.nodeValue}\"`;\n    }\n  }).join(' ');\n}\n\nclass Choosely {\n  constructor({\n    selector = undefined,\n    target = undefined,\n    searchable = false,\n    inheritAttributes = false,\n    enableArrowNavigation = true,\n    on = {}\n  }) {\n    if (on.Init) {\n      if (typeof on.Init === 'function') {\n        this.onInit = on.Init;\n      } else {\n        console.warn(`on Init property is not a function!`);\n\n        this.onInit = function () {};\n      }\n    } else {\n      this.onInit = function () {};\n    }\n\n    if (on.Open) {\n      if (typeof on.Open === 'function') {\n        this.onOpen = on.Open;\n      } else {\n        console.warn(`on Open property is not a function!`);\n\n        this.onOpen = function () {};\n      }\n    } else {\n      this.onOpen = function () {};\n    }\n\n    if (on.Close) {\n      if (typeof on.Close === 'function') {\n        this.onClose = on.Close;\n      } else {\n        console.warn(`on Close property is not a function!`);\n\n        this.onClose = function () {};\n      }\n    } else {\n      this.onClose = function () {};\n    }\n\n    if (on.Select) {\n      if (typeof on.Select === 'function') {\n        this.onSelect = on.Select;\n      } else {\n        console.warn(`on Select property is not a function!`);\n\n        this.onSelect = function () {};\n      }\n    } else {\n      this.onSelect = function () {};\n    }\n\n    this.state = {\n      _selected: null,\n\n      set Selected(new_selected) {\n        this._selected = new_selected;\n      },\n\n      get Selected() {\n        return this._selected;\n      },\n\n      _options: [],\n\n      set Options(new_options) {\n        this._options = new_options;\n      },\n\n      get Options() {\n        return this._options;\n      },\n\n      _filteredOptions: [],\n\n      set FilteredOptions(value) {\n        this._filteredOptions = value;\n        console.log('work', this);\n        this.RefreshOptions();\n      },\n\n      get FilteredOptions() {\n        return this._filteredOptions;\n      },\n\n      _isOpened: false,\n\n      set IsOpened(value) {\n        this._isOpened = value;\n      },\n\n      get IsOpened() {\n        return this._isOpened;\n      }\n\n    };\n    Object.defineProperty(this.state, 'FilteredOptions', {\n      set: function (value) {\n        this.state._filteredOptions = value;\n        this.RefreshOptions();\n      }.bind(this)\n    });\n\n    try {\n      const _sourceElement = document.querySelector(selector);\n\n      if (_sourceElement) {\n        this.sourceElement = _sourceElement;\n      } else {\n        throw new Error(`Source element doesn't exist. Selector: ${selector}`);\n      } // Select target HTML Element\n\n\n      if (target) {\n        const _targetElement = document.querySelector(target);\n\n        if (_targetElement) {\n          this.targetElement = _targetElement;\n        } else {\n          throw new Error(`Target element doesn't exist. Selector: ${target}`);\n        }\n      } else {\n        const _targetElement = this.sourceElement.parentElement;\n\n        if (_targetElement) {\n          this.targetElement = _targetElement;\n        } else {\n          throw new Error(`Source element doesn't have parent elements. Please define target element.`);\n        }\n      } // Render choosely\n\n\n      const options = this.sourceElement.querySelectorAll('option');\n\n      const renderOptions = () => {\n        if (inheritAttributes) {\n          if (typeof inheritAttributes === 'object' && Array.isArray(inheritAttributes)) {\n            // Array\n            return Array.from(options).map(_option => {\n              const text = _option.innerText;\n\n              const _clone = _option.cloneNode();\n\n              _clone.classList.add('choosely-option');\n\n              const attributes = _clone.attributes;\n              return `<div ${createAttributesFromAttributeList(attributes, inheritAttributes)} ${!inheritAttributes.includes('class') ? 'class=\"choosely-option\"' : ''}>${text}</div>`;\n            });\n          } else if (typeof inheritAttributes === 'boolean') {\n            // True\n            return Array.from(options).map(_option => {\n              const text = _option.innerText;\n\n              const _clone = _option.cloneNode();\n\n              _clone.classList.add('choosely-option');\n\n              const attributes = _clone.attributes;\n              return `<div ${createAttributesFromObject(attributes)} >${text}</div>`;\n            });\n          } else {\n            // Invalid type\n            throw new Error(`Invalid type for inheritAttributes property.`);\n          }\n        } else {\n          // False\n          return Array.from(options).map(_option => {\n            const text = _option.innerText;\n            return `<div class=\"choosely-option\">${text}</div>`;\n          });\n        }\n      };\n\n      const html = `\n                <div class=\"choosely-select\">\n                    <div class=\"choosely-selected\">\n                        ${options[0].innerText}\n                    </div>\n                    <div class=\"choosely-option-container\">\n                        ${searchable ? `\n                            <div class=\"choosely-search\">\n                                <input type=\"search\" autocomplete=\"off\">\n                            </div>` : ``}\n                        <div class=\"choosely-options\">\n                            ${renderOptions().join('')}\n                        </div>\n                    </div>\n                </div >\n                `;\n\n      const _element = createElementFromHTML(html);\n\n      this.targetElement.appendChild(_element);\n      this.chooselyElement = _element;\n      this.state.Selected = _element.querySelector('.choosely-selected');\n      this.state.Options = _element.querySelectorAll('.choosely-option');\n      this.state.Options[0].classList.add('choosely-selected-option');\n      this.chooselyOptionsElement = _element.querySelector('.choosely-option-container .choosely-options');\n      this.state.Selected.addEventListener('click', () => {\n        if (this.IsOpened) {\n          this.Close();\n        } else {\n          this.Open();\n        }\n      });\n      this.state.Options.forEach(_option => {\n        _option.addEventListener('click', () => {\n          this.Select(_option);\n          this.Close();\n        });\n      });\n      window.addEventListener('click', evt => {\n        if (this.IsOpened && !this.chooselyElement.contains(evt.target)) {\n          this.Close();\n        }\n      });\n      this.state._filteredOptions = this.state.Options;\n\n      if (searchable) {\n        const searchElement = this.chooselyElement.querySelector('.choosely-search > input');\n        searchElement.addEventListener('input', event => {\n          const keyword = event.target.value;\n          this.state.FilteredOptions = Array.from(this.state.Options).filter(_option => _option.innerText.toLowerCase().includes(keyword.toLowerCase()));\n        });\n      }\n\n      if (enableArrowNavigation) {\n        document.addEventListener('keydown', event => {\n          if (this.IsOpened) {\n            if (event.which === 40) {\n              // Down arrow\n              const indexOfSelectedOption = Array.from(this.state.FilteredOptions).findIndex(_option => _option.classList.contains('choosely-selected-option'));\n\n              if (0 <= indexOfSelectedOption && indexOfSelectedOption < this.state.FilteredOptions.length - 1) {\n                this.state.FilteredOptions[indexOfSelectedOption].classList.remove('choosely-selected-option');\n                this.state.FilteredOptions[indexOfSelectedOption + 1].classList.add('choosely-selected-option');\n                this.Select(this.state.FilteredOptions[indexOfSelectedOption + 1]);\n              }\n            } else if (event.which === 38) {\n              // Up arrow\n              const indexOfSelectedOption = Array.from(this.state.FilteredOptions).findIndex(_option => _option.classList.contains('choosely-selected-option'));\n\n              if (1 <= indexOfSelectedOption && indexOfSelectedOption < this.state.FilteredOptions.length) {\n                this.state.FilteredOptions[indexOfSelectedOption].classList.remove('choosely-selected-option');\n                this.state.FilteredOptions[indexOfSelectedOption - 1].classList.add('choosely-selected-option');\n                this.Select(this.state.FilteredOptions[indexOfSelectedOption - 1]);\n              }\n            } else if (event.keyCode === 13) {\n              this.Close();\n            }\n          }\n        });\n      }\n\n      return this;\n    } catch (err) {\n      console.error(err, 'Choosely.js');\n    } finally {\n      this.onInit();\n    }\n  }\n  /**\r\n   * @param {HTMLElement} option\r\n   */\n\n\n  Select(option) {\n    this.state.Options.forEach(_option => _option.classList.remove('choosely-selected-option'));\n    option.classList.add('choosely-selected-option');\n    this.state.Selected.innerText = option.innerText;\n    this.onSelect();\n  }\n\n  Open() {\n    this.chooselyElement.classList.add('c-opened');\n    this.IsOpened = true;\n    this.onOpen();\n  }\n\n  Close() {\n    this.chooselyElement.classList.remove('c-opened');\n    this.IsOpened = false;\n    this.onClose();\n  }\n\n  RefreshOptions() {\n    const temp = document.createElement('div');\n    this.state.FilteredOptions.forEach(_element => temp.appendChild(_element));\n    this.chooselyOptionsElement.innerHTML = '';\n    this.state.FilteredOptions.forEach(_element => this.chooselyOptionsElement.appendChild(_element));\n  }\n\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanM/YjYzNSJdLCJuYW1lcyI6WyJjcmVhdGVFbGVtZW50RnJvbUhUTUwiLCJodG1sU3RyaW5nIiwiZGl2IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwidHJpbSIsImZpcnN0Q2hpbGQiLCJjcmVhdGVBdHRyaWJ1dGVzRnJvbU9iamVjdCIsImF0dHJPYmplY3QiLCJPYmplY3QiLCJ2YWx1ZXMiLCJtYXAiLCJ2YWx1ZSIsIm5vZGVOYW1lIiwibm9kZVZhbHVlIiwiam9pbiIsImNyZWF0ZUF0dHJpYnV0ZXNGcm9tQXR0cmlidXRlTGlzdCIsImF0dHJBcnJheSIsImluY2x1ZGVzIiwiQ2hvb3NlbHkiLCJjb25zdHJ1Y3RvciIsInNlbGVjdG9yIiwidW5kZWZpbmVkIiwidGFyZ2V0Iiwic2VhcmNoYWJsZSIsImluaGVyaXRBdHRyaWJ1dGVzIiwiZW5hYmxlQXJyb3dOYXZpZ2F0aW9uIiwib24iLCJJbml0Iiwib25Jbml0IiwiY29uc29sZSIsIndhcm4iLCJPcGVuIiwib25PcGVuIiwiQ2xvc2UiLCJvbkNsb3NlIiwiU2VsZWN0Iiwib25TZWxlY3QiLCJzdGF0ZSIsIl9zZWxlY3RlZCIsIlNlbGVjdGVkIiwibmV3X3NlbGVjdGVkIiwiX29wdGlvbnMiLCJPcHRpb25zIiwibmV3X29wdGlvbnMiLCJfZmlsdGVyZWRPcHRpb25zIiwiRmlsdGVyZWRPcHRpb25zIiwibG9nIiwiUmVmcmVzaE9wdGlvbnMiLCJfaXNPcGVuZWQiLCJJc09wZW5lZCIsImRlZmluZVByb3BlcnR5Iiwic2V0IiwiYmluZCIsIl9zb3VyY2VFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInNvdXJjZUVsZW1lbnQiLCJFcnJvciIsIl90YXJnZXRFbGVtZW50IiwidGFyZ2V0RWxlbWVudCIsInBhcmVudEVsZW1lbnQiLCJvcHRpb25zIiwicXVlcnlTZWxlY3RvckFsbCIsInJlbmRlck9wdGlvbnMiLCJBcnJheSIsImlzQXJyYXkiLCJmcm9tIiwiX29wdGlvbiIsInRleHQiLCJpbm5lclRleHQiLCJfY2xvbmUiLCJjbG9uZU5vZGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJhdHRyaWJ1dGVzIiwiaHRtbCIsIl9lbGVtZW50IiwiYXBwZW5kQ2hpbGQiLCJjaG9vc2VseUVsZW1lbnQiLCJjaG9vc2VseU9wdGlvbnNFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImZvckVhY2giLCJ3aW5kb3ciLCJldnQiLCJjb250YWlucyIsInNlYXJjaEVsZW1lbnQiLCJldmVudCIsImtleXdvcmQiLCJmaWx0ZXIiLCJ0b0xvd2VyQ2FzZSIsIndoaWNoIiwiaW5kZXhPZlNlbGVjdGVkT3B0aW9uIiwiZmluZEluZGV4IiwibGVuZ3RoIiwicmVtb3ZlIiwia2V5Q29kZSIsImVyciIsImVycm9yIiwib3B0aW9uIiwidGVtcCJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBLFNBQVNBLHFCQUFULENBQStCQyxVQUEvQixFQUEyQztBQUN2QyxNQUFJQyxHQUFHLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxDQUF1QixLQUF2QixDQUFWO0FBQ0FGLEtBQUcsQ0FBQ0csU0FBSixHQUFnQkosVUFBVSxDQUFDSyxJQUFYLEVBQWhCLENBRnVDLENBSXZDOztBQUNBLFNBQU9KLEdBQUcsQ0FBQ0ssVUFBWDtBQUNIOztBQUVELFNBQVNDLDBCQUFULENBQW9DQyxVQUFwQyxFQUFnRDtBQUM1QyxTQUFPQyxNQUFNLENBQUNDLE1BQVAsQ0FBY0YsVUFBZCxFQUNGRyxHQURFLENBQ0dDLEtBQUQsSUFBWSxHQUFFQSxLQUFLLENBQUNDLFFBQVMsS0FBSUQsS0FBSyxDQUFDRSxTQUFVLEdBRG5ELEVBRUZDLElBRkUsQ0FFRyxHQUZILENBQVA7QUFHSDs7QUFFRCxTQUFTQyxpQ0FBVCxDQUEyQ1IsVUFBM0MsRUFBdURTLFNBQXZELEVBQWtFO0FBQzlELFNBQU9SLE1BQU0sQ0FBQ0MsTUFBUCxDQUFjRixVQUFkLEVBQ0ZHLEdBREUsQ0FDR0MsS0FBRCxJQUFXO0FBQ1osUUFBSUss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ImZpbGUiOiIuL3NyYy9pbmRleC5qcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIGNyZWF0ZUVsZW1lbnRGcm9tSFRNTChodG1sU3RyaW5nKSB7XHJcbiAgICB2YXIgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBkaXYuaW5uZXJIVE1MID0gaHRtbFN0cmluZy50cmltKCk7XHJcblxyXG4gICAgLy8gQ2hhbmdlIHRoaXMgdG8gZGl2LmNoaWxkTm9kZXMgdG8gc3VwcG9ydCBtdWx0aXBsZSB0b3AtbGV2ZWwgbm9kZXNcclxuICAgIHJldHVybiBkaXYuZmlyc3RDaGlsZDtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQXR0cmlidXRlc0Zyb21PYmplY3QoYXR0ck9iamVjdCkge1xyXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoYXR0ck9iamVjdClcclxuICAgICAgICAubWFwKCh2YWx1ZSkgPT4gYCR7dmFsdWUubm9kZU5hbWV9PVwiJHt2YWx1ZS5ub2RlVmFsdWV9XCJgKVxyXG4gICAgICAgIC5qb2luKCcgJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUF0dHJpYnV0ZXNGcm9tQXR0cmlidXRlTGlzdChhdHRyT2JqZWN0LCBhdHRyQXJyYXkpIHtcclxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKGF0dHJPYmplY3QpXHJcbiAgICAgICAgLm1hcCgodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGF0dHJBcnJheS5pbmNsdWRlcyh2YWx1ZS5ub2RlTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHt2YWx1ZS5ub2RlTmFtZX09XCIke3ZhbHVlLm5vZGVWYWx1ZX1cImA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIC5qb2luKCcgJyk7XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENob29zZWx5IHtcclxuICAgIGNvbnN0cnVjdG9yKHtcclxuICAgICAgICBzZWxlY3RvciA9IHVuZGVmaW5lZCxcclxuICAgICAgICB0YXJnZXQgPSB1bmRlZmluZWQsXHJcbiAgICAgICAgc2VhcmNoYWJsZSA9IGZhbHNlLFxyXG4gICAgICAgIGluaGVyaXRBdHRyaWJ1dGVzID0gZmFsc2UsXHJcbiAgICAgICAgZW5hYmxlQXJyb3dOYXZpZ2F0aW9uID0gdHJ1ZSxcclxuICAgICAgICBvbiA9IHt9XHJcbiAgICB9KSB7XHJcbiAgICAgICAgaWYgKG9uLkluaXQpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBvbi5Jbml0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSW5pdCA9IG9uLkluaXQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYG9uIEluaXQgcHJvcGVydHkgaXMgbm90IGEgZnVuY3Rpb24hYCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uSW5pdCA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5vbkluaXQgPSBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChvbi5PcGVuKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb24uT3BlbiA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4gPSBvbi5PcGVuO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBvbiBPcGVuIHByb3BlcnR5IGlzIG5vdCBhIGZ1bmN0aW9uIWApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4gPSBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub25PcGVuID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvbi5DbG9zZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG9uLkNsb3NlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xvc2UgPSBvbi5DbG9zZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2Fybihgb24gQ2xvc2UgcHJvcGVydHkgaXMgbm90IGEgZnVuY3Rpb24hYCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2xvc2UgPSBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMub25DbG9zZSA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob24uU2VsZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb24uU2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2VsZWN0ID0gb24uU2VsZWN0O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBvbiBTZWxlY3QgcHJvcGVydHkgaXMgbm90IGEgZnVuY3Rpb24hYCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2VsZWN0ID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLm9uU2VsZWN0ID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBfc2VsZWN0ZWQ6IG51bGwsXHJcbiAgICAgICAgICAgIHNldCBTZWxlY3RlZChuZXdfc2VsZWN0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkID0gbmV3X3NlbGVjdGVkO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBnZXQgU2VsZWN0ZWQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VsZWN0ZWQ7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9vcHRpb25zOiBbXSxcclxuICAgICAgICAgICAgc2V0IE9wdGlvbnMobmV3X29wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX29wdGlvbnMgPSBuZXdfb3B0aW9ucztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0IE9wdGlvbnMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2ZpbHRlcmVkT3B0aW9uczogW10sXHJcbiAgICAgICAgICAgIHNldCBGaWx0ZXJlZE9wdGlvbnModmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2ZpbHRlcmVkT3B0aW9ucyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3dvcmsnLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuUmVmcmVzaE9wdGlvbnMoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0IEZpbHRlcmVkT3B0aW9ucygpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9maWx0ZXJlZE9wdGlvbnM7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9pc09wZW5lZDogZmFsc2UsXHJcbiAgICAgICAgICAgIHNldCBJc09wZW5lZCh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNPcGVuZWQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZ2V0IElzT3BlbmVkKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzT3BlbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuc3RhdGUsICdGaWx0ZXJlZE9wdGlvbnMnLCB7XHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLl9maWx0ZXJlZE9wdGlvbnMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuUmVmcmVzaE9wdGlvbnMoKTtcclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IF9zb3VyY2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIGlmIChfc291cmNlRWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zb3VyY2VFbGVtZW50ID0gX3NvdXJjZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFNvdXJjZSBlbGVtZW50IGRvZXNuJ3QgZXhpc3QuIFNlbGVjdG9yOiAke3NlbGVjdG9yfWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBTZWxlY3QgdGFyZ2V0IEhUTUwgRWxlbWVudFxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBfdGFyZ2V0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTtcclxuICAgICAgICAgICAgICAgIGlmIChfdGFyZ2V0RWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudCA9IF90YXJnZXRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhcmdldCBlbGVtZW50IGRvZXNuJ3QgZXhpc3QuIFNlbGVjdG9yOiAke3RhcmdldH1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IF90YXJnZXRFbGVtZW50ID0gdGhpcy5zb3VyY2VFbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoX3RhcmdldEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRhcmdldEVsZW1lbnQgPSBfdGFyZ2V0RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTb3VyY2UgZWxlbWVudCBkb2Vzbid0IGhhdmUgcGFyZW50IGVsZW1lbnRzLiBQbGVhc2UgZGVmaW5lIHRhcmdldCBlbGVtZW50LmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBSZW5kZXIgY2hvb3NlbHlcclxuICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHRoaXMuc291cmNlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlbmRlck9wdGlvbnMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5oZXJpdEF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGluaGVyaXRBdHRyaWJ1dGVzID09PSAnb2JqZWN0JyAmJiBBcnJheS5pc0FycmF5KGluaGVyaXRBdHRyaWJ1dGVzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBcnJheVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShvcHRpb25zKS5tYXAoKF9vcHRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBfb3B0aW9uLmlubmVyVGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBfY2xvbmUgPSBfb3B0aW9uLmNsb25lTm9kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb25lLmNsYXNzTGlzdC5hZGQoJ2Nob29zZWx5LW9wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IF9jbG9uZS5hdHRyaWJ1dGVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPGRpdiAke2NyZWF0ZUF0dHJpYnV0ZXNGcm9tQXR0cmlidXRlTGlzdChhdHRyaWJ1dGVzLCBpbmhlcml0QXR0cmlidXRlcyl9ICR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIWluaGVyaXRBdHRyaWJ1dGVzLmluY2x1ZGVzKCdjbGFzcycpID8gJ2NsYXNzPVwiY2hvb3NlbHktb3B0aW9uXCInIDogJydcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0+JHt0ZXh0fTwvZGl2PmA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGluaGVyaXRBdHRyaWJ1dGVzID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXJyYXkuZnJvbShvcHRpb25zKS5tYXAoKF9vcHRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRleHQgPSBfb3B0aW9uLmlubmVyVGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBfY2xvbmUgPSBfb3B0aW9uLmNsb25lTm9kZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX2Nsb25lLmNsYXNzTGlzdC5hZGQoJ2Nob29zZWx5LW9wdGlvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlcyA9IF9jbG9uZS5hdHRyaWJ1dGVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBgPGRpdiAke2NyZWF0ZUF0dHJpYnV0ZXNGcm9tT2JqZWN0KGF0dHJpYnV0ZXMpfSA+JHt0ZXh0fTwvZGl2PmA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgdHlwZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgdHlwZSBmb3IgaW5oZXJpdEF0dHJpYnV0ZXMgcHJvcGVydHkuYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGYWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBBcnJheS5mcm9tKG9wdGlvbnMpLm1hcCgoX29wdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ZXh0ID0gX29wdGlvbi5pbm5lclRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJjaG9vc2VseS1vcHRpb25cIj4ke3RleHR9PC9kaXY+YDtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGh0bWwgPSBgXHJcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hvb3NlbHktc2VsZWN0XCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNob29zZWx5LXNlbGVjdGVkXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICR7b3B0aW9uc1swXS5pbm5lclRleHR9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNob29zZWx5LW9wdGlvbi1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaGFibGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjaG9vc2VseS1zZWFyY2hcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cInNlYXJjaFwiIGF1dG9jb21wbGV0ZT1cIm9mZlwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYGBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY2hvb3NlbHktb3B0aW9uc1wiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtyZW5kZXJPcHRpb25zKCkuam9pbignJyl9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXYgPlxyXG4gICAgICAgICAgICAgICAgYDtcclxuICAgICAgICAgICAgY29uc3QgX2VsZW1lbnQgPSBjcmVhdGVFbGVtZW50RnJvbUhUTUwoaHRtbCk7XHJcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0RWxlbWVudC5hcHBlbmRDaGlsZChfZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNob29zZWx5RWxlbWVudCA9IF9lbGVtZW50O1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLlNlbGVjdGVkID0gX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNob29zZWx5LXNlbGVjdGVkJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuT3B0aW9ucyA9IF9lbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaG9vc2VseS1vcHRpb24nKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5PcHRpb25zWzBdLmNsYXNzTGlzdC5hZGQoJ2Nob29zZWx5LXNlbGVjdGVkLW9wdGlvbicpO1xyXG4gICAgICAgICAgICB0aGlzLmNob29zZWx5T3B0aW9uc0VsZW1lbnQgPSBfZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2hvb3NlbHktb3B0aW9uLWNvbnRhaW5lciAuY2hvb3NlbHktb3B0aW9ucycpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5TZWxlY3RlZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLklzT3BlbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLk9wZW4oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuT3B0aW9ucy5mb3JFYWNoKChfb3B0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBfb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuU2VsZWN0KF9vcHRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuSXNPcGVuZWQgJiYgIXRoaXMuY2hvb3NlbHlFbGVtZW50LmNvbnRhaW5zKGV2dC50YXJnZXQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5DbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5fZmlsdGVyZWRPcHRpb25zID0gdGhpcy5zdGF0ZS5PcHRpb25zO1xyXG4gICAgICAgICAgICBpZiAoc2VhcmNoYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VhcmNoRWxlbWVudCA9IHRoaXMuY2hvb3NlbHlFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaG9vc2VseS1zZWFyY2ggPiBpbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgc2VhcmNoRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGtleXdvcmQgPSBldmVudC50YXJnZXQudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnMgPSBBcnJheS5mcm9tKHRoaXMuc3RhdGUuT3B0aW9ucykuZmlsdGVyKChfb3B0aW9uKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfb3B0aW9uLmlubmVyVGV4dC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGtleXdvcmQudG9Mb3dlckNhc2UoKSlcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVuYWJsZUFycm93TmF2aWdhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChldmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLklzT3BlbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC53aGljaCA9PT0gNDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvd24gYXJyb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4T2ZTZWxlY3RlZE9wdGlvbiA9IEFycmF5LmZyb20odGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnMpLmZpbmRJbmRleCgoX29wdGlvbikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3B0aW9uLmNsYXNzTGlzdC5jb250YWlucygnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA8PSBpbmRleE9mU2VsZWN0ZWRPcHRpb24gJiYgaW5kZXhPZlNlbGVjdGVkT3B0aW9uIDwgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUuRmlsdGVyZWRPcHRpb25zW2luZGV4T2ZTZWxlY3RlZE9wdGlvbl0uY2xhc3NMaXN0LnJlbW92ZSgnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnNbaW5kZXhPZlNlbGVjdGVkT3B0aW9uICsgMV0uY2xhc3NMaXN0LmFkZCgnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5TZWxlY3QodGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnNbaW5kZXhPZlNlbGVjdGVkT3B0aW9uICsgMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGV2ZW50LndoaWNoID09PSAzOCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXAgYXJyb3dcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4T2ZTZWxlY3RlZE9wdGlvbiA9IEFycmF5LmZyb20odGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnMpLmZpbmRJbmRleCgoX29wdGlvbikgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBfb3B0aW9uLmNsYXNzTGlzdC5jb250YWlucygnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMSA8PSBpbmRleE9mU2VsZWN0ZWRPcHRpb24gJiYgaW5kZXhPZlNlbGVjdGVkT3B0aW9uIDwgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnMubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnNbaW5kZXhPZlNlbGVjdGVkT3B0aW9uXS5jbGFzc0xpc3QucmVtb3ZlKCdjaG9vc2VseS1zZWxlY3RlZC1vcHRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9uc1tpbmRleE9mU2VsZWN0ZWRPcHRpb24gLSAxXS5jbGFzc0xpc3QuYWRkKCdjaG9vc2VseS1zZWxlY3RlZC1vcHRpb24nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlNlbGVjdCh0aGlzLnN0YXRlLkZpbHRlcmVkT3B0aW9uc1tpbmRleE9mU2VsZWN0ZWRPcHRpb24gLSAxXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQ2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcclxuICAgICAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIsICdDaG9vc2VseS5qcycpO1xyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIHRoaXMub25Jbml0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBvcHRpb25cclxuICAgICAqL1xyXG4gICAgU2VsZWN0KG9wdGlvbikge1xyXG4gICAgICAgIHRoaXMuc3RhdGUuT3B0aW9ucy5mb3JFYWNoKChfb3B0aW9uKSA9PiBfb3B0aW9uLmNsYXNzTGlzdC5yZW1vdmUoJ2Nob29zZWx5LXNlbGVjdGVkLW9wdGlvbicpKTtcclxuICAgICAgICBvcHRpb24uY2xhc3NMaXN0LmFkZCgnY2hvb3NlbHktc2VsZWN0ZWQtb3B0aW9uJyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5TZWxlY3RlZC5pbm5lclRleHQgPSBvcHRpb24uaW5uZXJUZXh0O1xyXG4gICAgICAgIHRoaXMub25TZWxlY3QoKTtcclxuICAgIH1cclxuICAgIE9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy5jaG9vc2VseUVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnYy1vcGVuZWQnKTtcclxuICAgICAgICB0aGlzLklzT3BlbmVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgfVxyXG4gICAgQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jaG9vc2VseUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgnYy1vcGVuZWQnKTtcclxuICAgICAgICB0aGlzLklzT3BlbmVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5vbkNsb3NlKCk7XHJcbiAgICB9XHJcbiAgICBSZWZyZXNoT3B0aW9ucygpIHtcclxuICAgICAgICBjb25zdCB0ZW1wID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnMuZm9yRWFjaCgoX2VsZW1lbnQpID0+IHRlbXAuYXBwZW5kQ2hpbGQoX2VsZW1lbnQpKTtcclxuICAgICAgICB0aGlzLmNob29zZWx5T3B0aW9uc0VsZW1lbnQuaW5uZXJIVE1MID0gJyc7XHJcbiAgICAgICAgdGhpcy5zdGF0ZS5GaWx0ZXJlZE9wdGlvbnMuZm9yRWFjaCgoX2VsZW1lbnQpID0+IHRoaXMuY2hvb3NlbHlPcHRpb25zRWxlbWVudC5hcHBlbmRDaGlsZChfZWxlbWVudCkpO1xyXG4gICAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/index.js\n");

/***/ })

/******/ });